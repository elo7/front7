!function(){"use strict";function b(){return a||(a=new Promise(function(a,b){var c=indexedDB.open("keyval-store",1);c.onerror=function(){b(c.error)},c.onupgradeneeded=function(){c.result.createObjectStore("keyval")},c.onsuccess=function(){a(c.result)}})),a}function c(a,c){return b().then(function(b){return new Promise(function(d,e){var f=b.transaction("keyval",a);f.oncomplete=function(){d()},f.onerror=function(){e(f.error)},c(f.objectStore("keyval"))})})}var a,d={get:function(a){var b;return c("readonly",function(c){b=c.get(a)}).then(function(){return b.result})},set:function(a,b){return c("readwrite",function(c){c.put(b,a)})},delete:function(a){return c("readwrite",function(b){b.delete(a)})},clear:function(){return c("readwrite",function(a){a.clear()})},keys:function(){var a=[];return c("readonly",function(b){(b.openKeyCursor||b.openCursor).call(b).onsuccess=function(){this.result&&(a.push(this.result.key),this.result.continue())}}).then(function(){return a})}};"undefined"!=typeof module&&module.exports?module.exports=d:"undefined"!=typeof define?define("idb",[],function(){return d}):self.idbKeyval=d}();
